{
  "resourceType": "StructureDefinition",
  "id": "Profile-nNGM-Composition-Case",
  "url": "http://uk-koeln.de/fhir/StructureDefinition/nNGM/Composition",
  "name": "Profile_nNGM_Composition_Case",
  "title": "Profile - nNGM - Composition",
  "status": "active",
  "description": "Dieses Profil beschreibt einen nNGM-Fall mit allen seinen zugehörigen Daten",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Composition",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Composition",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Composition.identifier",
        "path": "Composition.identifier",
        "label": "nNGM Fallnummer",
        "short": "Eindeutige Nummer des nNGM-Falls im Zentrum",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Composition.identifier.system",
        "path": "Composition.identifier.system",
        "min": 1,
        "fixedUri": "http://uk-koeln.de/fhir/sid/nngm-case-no",
        "mustSupport": false
      },
      {
        "id": "Composition.status",
        "path": "Composition.status",
        "fixedCode": "final"
      },
      {
        "id": "Composition.type",
        "path": "Composition.type",
        "fixedCodeableConcept": {
          "coding": [
            {
              "system": "http://loinc.org",
              "code": "11503-0"
            }
          ]
        }
      },
      {
        "id": "Composition.subject",
        "path": "Composition.subject",
        "label": "Patient",
        "short": "Patient des nNGM-Falls",
        "min": 1,
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/Patient/nNGM/pseudonymisiert",
              "http://uk-koeln.de/fhir/StructureDefinition/Patient/nNGM/patient"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.author",
        "path": "Composition.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/Organisation/nNGM"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ]
      },
      {
        "id": "Composition.section",
        "path": "Composition.section",
        "slicing": {
          "discriminator": [
            {
              "type": "pattern",
              "path": "section.code"
            }
          ],
          "rules": "open"
        }
      },
      {
        "id": "Composition.section:consent",
        "path": "Composition.section",
        "sliceName": "consent",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:consent.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:consent.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:consent.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "CONSENT"
      },
      {
        "id": "Composition.section:consent.entry",
        "path": "Composition.section.entry",
        "label": "Einwilligungserklärungen",
        "short": "Alle Einwilligungserklärungen des Patienten für das nNGM-Netzwerk",
        "min": 1,
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/nNGM/Consent"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:firstDiagnosis",
        "path": "Composition.section",
        "sliceName": "firstDiagnosis",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:firstDiagnosis.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:firstDiagnosis.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:firstDiagnosis.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "FIRST_DIAGNOSIS"
      },
      {
        "id": "Composition.section:firstDiagnosis.entry",
        "path": "Composition.section.entry",
        "label": "Erstdiagnose - Tumorerkrankung",
        "short": "Die Erstdiagnose der Tumorerkrankung, für den der Fall angelegt wird",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/Condition/nNGM/FirstDiagnosis"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:coverage",
        "path": "Composition.section",
        "sliceName": "coverage",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:coverage.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:coverage.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:coverage.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "COVERAGE"
      },
      {
        "id": "Composition.section:coverage.entry",
        "path": "Composition.section.entry",
        "label": "Versicherungsverhältnis",
        "short": "Krankenversicherungsverhältnis des Patienten zur Zeit der Anforderung",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/Coverage/nNGM/pseudonymisiert",
              "http://uk-koeln.de/fhir/StructureDefinition/nNGM/Coverage"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:tobaccoSmoking",
        "path": "Composition.section",
        "sliceName": "tobaccoSmoking",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:tobaccoSmoking.title",
        "path": "Composition.section.title",
        "fixedString": "Observations Section"
      },
      {
        "id": "Composition.section:tobaccoSmoking.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:tobaccoSmoking.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:tobaccoSmoking.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "TOBACCO_SMOKING"
      },
      {
        "id": "Composition.section:tobaccoSmoking.entry",
        "path": "Composition.section.entry",
        "label": "Raucherstatus",
        "short": "Raucherstatus des Patienten zur Zeit der Anforderung",
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/raucherstatus"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:vitalStates",
        "path": "Composition.section",
        "sliceName": "vitalStates",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:vitalStates.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:vitalStates.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:vitalStates.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "VITAL_STATES"
      },
      {
        "id": "Composition.section:vitalStates.entry",
        "path": "Composition.section.entry",
        "label": "Vitalstatus",
        "short": "Vitalstatus des Patienten zur Zeit der Anforderung",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/nNGM/Vitalstatus"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:ecogs",
        "path": "Composition.section",
        "sliceName": "ecogs",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:ecogs.code",
        "path": "Composition.section.code",
        "min": 1,
        "patternCodeableConcept": {
          "coding": [
            {
              "system": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType",
              "code": "89247-1"
            }
          ]
        }
      },
      {
        "id": "Composition.section:ecogs.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:ecogs.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "ECOGS"
      },
      {
        "id": "Composition.section:ecogs.entry",
        "path": "Composition.section.entry",
        "label": "ECOG",
        "short": "Alle erfassten ECOG des Patienten für die Anforderungen und Therapien",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/ecog"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:diagnosticsRequest",
        "path": "Composition.section",
        "sliceName": "diagnosticsRequest",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:diagnosticsRequest.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:diagnosticsRequest.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:diagnosticsRequest.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "DIAGNOSTICS_REQUEST"
      },
      {
        "id": "Composition.section:diagnosticsRequest.entry",
        "path": "Composition.section.entry",
        "label": "Anforderung Diagnostik",
        "short": "Die Anforderung der Diagnostik für den nNGM-Fall",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/ServiceRequest/nNGM/AnforderungDerDiagnostik"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:tkiResistances",
        "path": "Composition.section",
        "sliceName": "tkiResistances",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:tkiResistances.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:tkiResistances.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:tkiResistances.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "TKI_RESISTANCES"
      },
      {
        "id": "Composition.section:tkiResistances.entry",
        "path": "Composition.section.entry",
        "label": "TKI-Resistenz",
        "short": "Daten der TKI-Resistenz der Tumorerkrankung des nNGM-Falls",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/tki-resistenz-alk",
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/tki-resistenz-braf",
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/tki-resistenz-egfr",
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/tki-resistenz-fgfr",
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/tki-resistenz-kras",
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/tki-resistenz-met",
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/tki-resistenz-ros1"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:tumorProgressRecurrences",
        "path": "Composition.section",
        "sliceName": "tumorProgressRecurrences",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:tumorProgressRecurrences.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:tumorProgressRecurrences.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:tumorProgressRecurrences.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "TUMOR_PROGRESS_RECURRENCES"
      },
      {
        "id": "Composition.section:tumorProgressRecurrences.entry",
        "path": "Composition.section.entry",
        "label": "Progress/Rezidiv",
        "short": "Alle Beobachtungen von Progress oder Rezidiv für die Tumorerkrankung des nNGM-Falls",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/progress-relapse"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:tumorHistologies",
        "path": "Composition.section",
        "sliceName": "tumorHistologies",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:tumorHistologies.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:tumorHistologies.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:tumorHistologies.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "TUMOR_HISTOLOGIES"
      },
      {
        "id": "Composition.section:tumorHistologies.entry",
        "path": "Composition.section.entry",
        "label": "Histologie",
        "short": "Alle Histologie zu Tumormaterial des nNGM-Falls",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/histologie"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.section:tumorStages",
        "path": "Composition.section",
        "sliceName": "tumorStages",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:tumorStages.code",
        "path": "Composition.section.code",
        "min": 1
      },
      {
        "id": "Composition.section:tumorStages.code.coding.system",
        "path": "Composition.section.code.coding.system",
        "fixedUri": "http://uk-koeln.de/fhir/CodeSystem/nNGM/CompositionSectionType"
      },
      {
        "id": "Composition.section:tumorStages.code.coding.code",
        "path": "Composition.section.code.coding.code",
        "fixedCode": "TUMOR_STAGES"
      },
      {
        "id": "Composition.section:tumorStages.entry",
        "path": "Composition.section.entry",
        "label": "Tumorstadium",
        "short": "Alle Tumorstadien zu Tumormaterial des nNGM-Falls",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://uk-koeln.de/fhir/StructureDefinition/Observation/nNGM/tumorstadium"
            ],
            "aggregation": [
              "contained"
            ]
          }
        ],
        "mustSupport": true
      }
    ]
  }
}